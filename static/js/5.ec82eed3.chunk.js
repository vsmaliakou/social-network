(this["webpackJsonpit-incubator-todolist-ts"]=this["webpackJsonpit-incubator-todolist-ts"]||[]).push([[5],{379:function(e,t,n){"use strict";n.r(t);var a=n(69),r=n(147),l=n(0),c=n.n(l),u=function(){var e=Object(l.useState)(null),t=Object(r.a)(e,2),n=t[0],a=t[1];return Object(l.useEffect)((function(){var e,t=function(){setTimeout(n,3e3)};function n(){var n,r;null===(n=e)||void 0===n||n.removeEventListener("close",t),null===(r=e)||void 0===r||r.close(),(e=new WebSocket("wss://social-network.samuraijs.com/handlers/ChatHandler.ashx")).addEventListener("close",t),a(e)}return n(),function(){e.removeEventListener("close",t),e.close()}}),[]),c.a.createElement("div",null,c.a.createElement(i,{wsChannel:n}),c.a.createElement(s,{wsChannel:n}))},i=function(e){var t=e.wsChannel,n=Object(l.useState)([]),u=Object(r.a)(n,2),i=u[0],s=u[1];return Object(l.useEffect)((function(){var e=function(e){var t=JSON.parse(e.data);s((function(e){return[].concat(Object(a.a)(e),Object(a.a)(t))}))};return null===t||void 0===t||t.addEventListener("message",e),function(){null===t||void 0===t||t.removeEventListener("message",e)}}),[t]),c.a.createElement("div",{style:{height:"400px",overflowY:"auto"}},i.map((function(e,t){return c.a.createElement(o,{key:t,message:e})})))},o=function(e){var t=e.message;return c.a.createElement("div",null,c.a.createElement("img",{src:t.photo,style:{width:"30px"},alt:"img"})," ",c.a.createElement("b",null,t.userName),c.a.createElement("br",null),t.message,c.a.createElement("hr",null))},s=function(e){var t=e.wsChannel,n=Object(l.useState)(""),a=Object(r.a)(n,2),u=a[0],i=a[1],o=Object(l.useState)("pending"),s=Object(r.a)(o,2),v=s[0],d=s[1],m=function(){d("ready")};Object(l.useEffect)((function(){return null===t||void 0===t||t.addEventListener("open",m),function(){null===t||void 0===t||t.removeEventListener("open",m)}}),[t]);return c.a.createElement("div",null,c.a.createElement("div",null,c.a.createElement("textarea",{value:u,onChange:function(e){return i(e.currentTarget.value)}})),c.a.createElement("div",null,c.a.createElement("button",{disabled:null===t&&"ready"!==v,onClick:function(){u&&(null===t||void 0===t||t.send(u),i(""))}},"Send")))};t.default=function(){return c.a.createElement("div",null,c.a.createElement(u,null))}}}]);
//# sourceMappingURL=5.ec82eed3.chunk.js.map